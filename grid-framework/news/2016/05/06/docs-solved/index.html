

<!DOCTYPE HTML>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<title>
			HiPhish's Workshop
		</title>
		
		<!-- Bootstrap integration -->
		<link rel="stylesheet"
		href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css"
		crossorigin="anonymous"/>

		<!-- Bootstrap customisation -->
		<link rel="stylesheet" href="/theme/css/custom.css" type="text/css" media="all"/>

		<!-- My own style sheets -->
		<link rel="stylesheet" href="/theme/css/local-nav.css" type="text/css" media="all"/>
		<link rel="stylesheet" href="/theme/css/pygments.css" type="text/css" media="all"/>
<link rel="stylesheet" href="/theme/css/blog.css" type="text/css" media="all">
	
<link rel="stylesheet" href="/theme/css/article.css" type="text/css" media="all">

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

		<!-- Bootstrap Javascript -->
		<script
			src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
			integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
		crossorigin="anonymous"></script>
	</head>
	<body>
		<h1>HTML-page body</h1>
		<header>
			<!-- Top navigation bar -->
			<nav id="main-navbar" class="navbar navbar-default">
				<h1>Site-wide navigation bar</h1>
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="container-fluid">
					<input type="checkbox" value="" name="navbar-toggle-cbox" id="navbar-toggle-cbox"/>
					<!-- Brand and toggle get grouped for better mobile display -->
					<div class="navbar-header">
						<label for="navbar-toggle-cbox" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar-collapse" aria-controls="navbar-toggle-cbox">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</label>
						<a class="navbar-brand" href="http://hiphish.github.io">HiPhish's Workshop</a>
					</div>

					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse" id="main-navbar-collapse">
						<!-- The list of navbar items -->
						<ul class="nav navbar-nav">
							<li class="dropdown active">
								<a class="dropdown-toggle" href="/grid-framework" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
									Grid Framework <span></span> <span class="sr-only">(current)</span>								</a>
								<ul class="dropdown-menu">

									<li>
										<a href="http://hiphish.github.io/grid-framework">
											Overview										</a>
									</li>

									<li class="divider" role="separator"></li>

									<li>
										<a href="http://hiphish.github.io/grid-framework/features">
											Features										</a>
									</li>

									<li>
										<a href="http://hiphish.github.io/grid-framework/examples">
											Examples										</a>
									</li>

									<li>
										<a href="http://hiphish.github.io/grid-framework/gallery">
											Gallery										</a>
									</li>

									<li>
										<a href="http://hiphish.github.io/grid-framework/showcase">
											Showcase										</a>
									</li>

									<li>
										<a href="http://hiphish.github.io/grid-framework/faq">
											FAQ										</a>
									</li>

									<li>
										<a href="http://hiphish.github.io/grid-framework/news">
											News										</a>
									</li>

									<li class="divider" role="separator"></li>

									<li>
										<a href="http://forum.unity3d.com/threads/grid-framework-scripting-and-editor-plugins.144886/" target="_blank">
											Support										</a>
									</li>

									<li class="divider" role="separator"></li>

									<li>
										<a href="https://www.assetstore.unity3d.com/#/content/62498" target="_blank">
											Buy Now <span class="badge">35$</span>										</a>
									</li>
								</ul>
							</li>
							<li class="dropdown">
								<a class="dropdown-toggle" href="https://gitlab.com/HiPhish/ntfs-clone" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
									Open Source <span></span>								</a>
								<ul class="dropdown-menu">

									<li>
										<a href="https://gitlab.com/HiPhish/ntfs-clone" target="_blank">
											NTFS-Clone										</a>
									</li>

									<li>
										<a href="https://gitlab.com/HiPhish/roll" target="_blank">
											roll										</a>
									</li>

									<li>
										<a href="https://github.com/HiPhish/Newton-method" target="_blank">
											Newton's Method in C										</a>
									</li>

									<li>
										<a href="https://github.com/HiPhish/XeenTools" target="_blank">
											Xeen Tools										</a>
									</li>

									<li>
										<a href="https://github.com/HiPhish/Wolf3DExtract" target="_blank">
											Wolf3D Extract										</a>
									</li>

									<li>
										<a href="https://github.com/HiPhish/Game-Source-Documentation" target="_blank">
											Game Source Documentation										</a>
									</li>
								</ul>
							</li>
							<li class="dropdown">
								<a class="dropdown-toggle" href="https://gitlab.com/HiPhish/info.vim" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
									Nvim/Vim Plugins <span></span>								</a>
								<ul class="dropdown-menu">

									<li>
										<a href="https://gitlab.com/HiPhish/info.vim" target="_blank">
											Info.vim										</a>
									</li>

									<li>
										<a href="https://gitlab.com/HiPhish/repl.nvim" target="_blank">
											REPL.nvim										</a>
									</li>

									<li>
										<a href="https://gitlab.com/HiPhish/jinja.vim" target="_blank">
											jinja.vim										</a>
									</li>
								</ul>
							</li>
						</ul>
						<ul class="nav navbar-nav navbar-right">
								<li class=" ">
									<a href="/blog">
										Blog									</a>
								</li>
								<li class=" ">
									<a href="/about">
										About									</a>
								</li>
						</ul>
					</div>
				</div>
			</nav>
		</header>

		<section class="container">
			<h1>Document body</h1>
<!-- Sub-site navigation bar -->
<nav class="local-nav">
	<h1>Sub-site navigation bar</h1>
	<ul>
		<li>
			<a href="http://hiphish.github.io/grid-framework">
				Grid Framework
			</a>
		</li>

		<li>
			<a href="http://hiphish.github.io/grid-framework/features">
				Features
			</a>
		</li>

		<li>
			<a href="http://hiphish.github.io/grid-framework/examples">
				Examples
			</a>
		</li>

		<li>
			<a href="http://hiphish.github.io/grid-framework/gallery">
				Gallery
			</a>
		</li>

		<li>
			<a href="http://hiphish.github.io/grid-framework/showcase">
				Showcase
			</a>
		</li>

		<li>
			<a href="http://hiphish.github.io/grid-framework/faq">
				FAQ
			</a>
		</li>

		<li class="active">
			News <span class="sr-only">(current)</span>
		</li>

		<li>
			<a href="http://forum.unity3d.com/threads/grid-framework-scripting-and-editor-plugins.144886/" target="_blank">
				Support
			</a>
		</li>

		<li>
			<a href="https://www.assetstore.unity3d.com/#/content/62498" target="_blank">
				Buy <span class="badge">35$</span>
			</a>
		</li>
	</ul>
</nav>


<section class="blog-body">
	<h1>Blog</h1>

	<!-- Article body -->
	<section>
<main>
	<nav class="blog-breadcrumbs" aria-label="Breadcrumbs">
	<h1>Breadcrumbs navigation</h1>
	<ol class="breadcrumb">
		<li>
			<a href="http://hiphish.github.io/grid-framework/news/">
				news
			</a>
		</li>
		<li>
			<a href="http://hiphish.github.io/grid-framework/news/2016/">
				2016
			</a>
		<li>
			<a href="http://hiphish.github.io/grid-framework/news/2016/05/">
				05
			</a>
		<li class="active">
			6
		</li>
		<li class="active">
			docs-solved
		</li>
	</ol>
</nav>


	<article>
		<!-- Title of the article -->
		<h1>
			<a href="http://hiphish.github.io/grid-framework/news/2016/05/06/docs-solved/" rel="bookmark" title="Permalink to Documentation dilemma solved">
				Documentation dilemma solved
			</a>
		</h1>

		<header>
<!-- Date of the article -->
			<p>
				<time class="published" datetime="2016-05-06T00:00:00+02:00">
					Published: 2016-05-06
				</time>
			</p>

			<!-- TODO: This has to be something nicer than a button -->
			<p>
				Category:
				<a class="" href="http://hiphish.github.io/grid-framework/news/categories/progress/">
					progress
				</a>
			</p>
		</header>

		<!-- Content of the article -->
		<p>I have finished the build system,  which also includes the previously discussed
documentation dilemma.  The problem was the presence of actual JavaScript files
which Unity kept confusing for UnityScript files, because Unity keeps referring
to UnityScript as JavaScript.</p>
<div class="section" id="the-build-system">
<h2>The build system</h2>
<p>When you purchase  Grid Framework from the  Asset Store you get the full source
code instead of a DLL,  but I still have to package everything in a format that
is suitable for distribution.  First I need a  new blank Unity project,  then I
import the assets to  publish into the project,  then I import the  Asset Store
tools and finally I upload it.</p>
<p>In the very early  days I was doing it all by hand,  but it goes without saying
that it was a very tedious and error-prone process.  Some way of automation was
needed.  Unity can  be operated  from the  command line  and since  I'm  a Unix
programmer I was already familiar with Make.</p>
<p>The Make process is as follows:</p>
<ol class="arabic simple">
<li>I have  a Unity  project where all  the work happens,  so I launch  Unity in
command-line mode and export all the relevant files as a Unity package.</li>
<li>The documentation is build from  the source and separately maintained manual
pages.</li>
<li>A new Unity  project is  created in  command-line  mode and  the package  is
imported.  Afterwards  the  previously   built  documentation  is  imported,
followed by the Asset Store tools.</li>
</ol>
<p>At this point  I have a  fresh Unity project  ready for shipping.  All  this is
executed  by  typing <code>make publish</code>  in  my shell.  The only  way to  make this
process even easier would  be to bind this to  a key in Vim, but I'm not <em>that</em>
lazy ;)</p>
</div>
<div class="section" id="the-documentation-dilemma">
<h2>The documentation dilemma</h2>
<p>In version  1.x my  solution  to  the documentation  dilemma was  to abuse  the
<em>WebPlayerTemplates</em> directory.  UnityScript files  in that  directory  will be
ignored by  the compiler,  thus my JavaScript files were safe there.  Of course
this is not what  that directory is for and  some people did not like how I was
taking over  a directory  they needed.  The band-aid  solution was  to host the
documentation online so people could delete their local copy.</p>
<p>I have now solved the problem in a way that will satisfy everyone. The trick is
that JavaScript  files do not actually  have to end in <code>.js</code>,  you just have to
tell the browser  what they are.  If I was writing  my own HTML  and JavaScript
this would be  the end of the story,  but I use Doxygen  to generate it  for me
instead and Doxygen names JavaScript files such that they end in <code>.js</code>.</p>
<p>How can we fix this?  We would have to rename every JavaScript file and then go
through every  single HTML  and JavaScript  file and  change all  references to
JavaScript files accordingly.  This whole process would have to be automated so
we can carry it out right after generating the documentation.</p>
<p>One of the Unix philosophies is to have many small programs that carry out very
specific and specialised  tasks and then glue  them together through scripting.
We can perform all the above steps using a <code>for</code> loop, <code>find</code>, <code>mv</code> and <code>sed</code>.</p>
<p>First we need  to find all the files  we are looking for.  The first time these
are just JavaScript  files and the second time  around it's HTML and JavaScript
files.</p>
<div class="highlight"><pre><span></span><span class="c1"># Find all JavaScript files</span>
find ./build/documentation/html/ -type f -name <span class="s1">'*.js'</span>

<span class="c1"># Find all HTML and JavaScript files (JS files after being renamed)</span>
find ./build/documentation/html/ -type f -name <span class="s1">'*.js.txt'</span> <span class="se">\</span>
        -or -name <span class="s1">'*.html'</span>JavaScript files
</pre></div>
<p>These two  lines would  just list  the files,  but  we  don't want  files names
printed to  the terminal,  we want  to loop  over them.  Wrapping a  command in
backticks replaces their content with the output of the command.  Let's use the
output in a <code>for</code> loop.</p>
<div class="highlight"><pre><span></span><span class="c1"># I'm only showing the first one here</span>
<span class="k">for</span> f in <span class="sb">`</span>find ./build/documentation/html/ -type f -name <span class="s1">'*.js'</span><span class="sb">`</span><span class="p">;</span> <span class="k">do</span>
</pre></div>
<p>Inside the loop we can use the variable <code>$f</code> to reference the current file. The
renaming process is very simple,  we just append <code>.txt</code> to the file name;  this
way <code>navtree.js</code> becomes <code>navtree.js.txt</code> for example.</p>
<div class="highlight"><pre><span></span><span class="c1"># The file extension doesn't really matter, but everyone knows what a text</span>
<span class="c1"># file is, so I might as well use that.</span>
mv <span class="nv">$f</span> <span class="nv">$f</span>.txt
</pre></div>
<p>Now for the harder part:  we have to  go through the contents  of all files and
change any reference to a file ending in <code>.js</code> to the same,  except with <code>.txt</code>
appended.  The program <code>sed</code> can do this;  <code>sed</code> stands for <em>Stream Editor</em> and
it can edit text files automatically based on commands passed to it.</p>
<div class="highlight"><pre><span></span><span class="c1"># '-E' means using modern regex, '-i "" ' means in-place overwriting</span>
sed -E -i <span class="s2">""</span> <span class="s1">'s/([_a-zA-Z0-9]*)\.js/\1.js.txt/'</span> <span class="nv">$f</span>
</pre></div>
<p><code>sed</code>  finds  the  parts  we  want  to  replace  using the  regular  expression
<code>([_a-zA-Z0-9]*)\.js</code>  and then replaces the match  with the file name followed
by <code>.js.txt</code>  using <code>\1.js.txt</code>  (the <code>\1</code> stands for the  match of the braces,
which is the file name in practice).</p>
<p>And that's essentially it.  All that is left now is  writing it on one line and
escaping the dollar signs for Make.  This solution makes it possible to include
the full documentation  working out of the box  from any directory.  Now all of
Grid Framework  can be  placed  in a  single  subdirectory of  <em>Plugins</em>.  Once
version 2  gets published  I will  update version  1 to  not use  the old  hack
anymore.</p>
</div>

	</article>

	<footer>
		<!-- Navigation items (next/previous) -->
		<nav>
			<h1>Previous/next article</h1>
			<ul class="pager">
				<li class="previous">
					<a href="http://hiphish.github.io/grid-framework/news/2016/04/22/fixing-broken/" rel="prev">
						<span aria-hidden="true">&larr;</span> Fixing what has been broken
					</a>
				</li>
				<li class="next">
					<a href="http://hiphish.github.io/grid-framework/news/2016/05/13/version-191/" rel="next">
						Grid Framework version 1.9.1 released <span aria-hidden="true">&rarr;</span>
					</a>
				</li>
			</ul>
		</nav>
	</footer>
</main>
	</section>

	<!-- "Left" pillar, article navigation -->
	<nav class="well">
		<!-- This navigator contains links to the various archive types. -->
		<h1>Blog navigation</h1>

		<nav>
			<h1>
				<a href="http://hiphish.github.io/grid-framework/news/archives/">
					Archives
				</a>
			</h1>
			<ul>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/2017/">
						2017 (2)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/2016/">
						2016 (16)
					</a>
					<ul>
						<li>
							<a href="http://hiphish.github.io/grid-framework/news/2016/11/">
								November (1)
							</a>
							<ul>
							</ul>
						</li>
					</ul>
					<ul>
						<li>
							<a href="http://hiphish.github.io/grid-framework/news/2016/06/">
								June (2)
							</a>
							<ul>
							</ul>
						</li>
					</ul>
					<ul>
						<li>
							<a href="http://hiphish.github.io/grid-framework/news/2016/05/">
								May (4)
							</a>
							<ul>
								<li>
									<a href="http://hiphish.github.io/grid-framework/news/2016/05/25/release-200/">
										Grid Framework version 2.0.0 released
									</a>
								</li>
								<li>
									<a href="http://hiphish.github.io/grid-framework/news/2016/05/18/submitted-200/">
										Version 2.0.0 has been submitted
									</a>
								</li>
								<li>
									<a href="http://hiphish.github.io/grid-framework/news/2016/05/13/version-191/">
										Grid Framework version 1.9.1 released
									</a>
								</li>
								<li>
									<a href="http://hiphish.github.io/grid-framework/news/2016/05/06/docs-solved/">
										Documentation dilemma solved
									</a>
								</li>
							</ul>
						</li>
					</ul>
					<ul>
						<li>
							<a href="http://hiphish.github.io/grid-framework/news/2016/04/">
								April (3)
							</a>
							<ul>
							</ul>
						</li>
					</ul>
					<ul>
						<li>
							<a href="http://hiphish.github.io/grid-framework/news/2016/03/">
								March (2)
							</a>
							<ul>
							</ul>
						</li>
					</ul>
					<ul>
						<li>
							<a href="http://hiphish.github.io/grid-framework/news/2016/02/">
								February (1)
							</a>
							<ul>
							</ul>
						</li>
					</ul>
					<ul>
						<li>
							<a href="http://hiphish.github.io/grid-framework/news/2016/01/">
								January (3)
							</a>
							<ul>
							</ul>
						</li>
					</ul>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/2015/">
						2015 (13)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/2014/">
						2014 (8)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/2013/">
						2013 (19)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/2012/">
						2012 (40)
					</a>
				</li>
			</ul>
		</nav>

		<nav>
			<h1>
				<a href="http://hiphish.github.io/grid-framework/news/categories/">
					Categories
				</a>
			</h1>
			<ul>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/categories/misc/">
						misc (23)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/categories/organisation/">
						organisation (6)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/categories/progress/">
						progress (27)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/categories/release/">
						release (40)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/categories/tips/">
						tips (2)
					</a>
				</li>
			</ul>
		</nav>

		<nav>
			<h1>
				<a href="http://hiphish.github.io/grid-framework/news/tags/">
					Tags
				</a>
			</h1>
			<ul>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/tags/coordinate-system/">
						coordinate-system (1)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/tags/old-blog/">
						old-blog (73)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/tags/extension/">
						extension (4)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/tags/how-to/">
						how-to (6)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/tags/api-change/">
						API-change (1)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/tags/rant/">
						rant (3)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/tags/spheric/">
						spheric (2)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/tags/asset-store/">
						asset-store (1)
					</a>
				</li>
				<li>
					<a href="http://hiphish.github.io/grid-framework/news/tags/example/">
						example (7)
					</a>
				</li>
			</ul>
		</nav>

		<aside>
			<h1>Subscription options</h1>
			<strong>
				Subscribe:
				<a href="http://hiphish.github.io/grid-framework/news/rss.xml">RSS</a>
				<a href="http://hiphish.github.io/grid-framework/news/atom.xml">Atom</a>
			</strong>
		</aside>
	</nav>
</section>
		</section>

		<!-- Footer of the website -->
		<footer>
			<div class="container">
				<div class="col-md-8 footer-self">
					<a href="http://192.168.0.190:8000" title="HiPhish's Workshop">
						<img src="http://hiphish.github.io/images/footer/logo.png" alt="HiPhish's Workshop" />
					</a>
					<p class="text-muted">
						<a href="http://creativecommons.org/licenses/by-sa/4.0/"><img class="copyright-image" alt="Creative Commons Attribution-ShareAlike 4.0International License" src="http://hiphish.github.io/images/footer/cc.svg" /></a>
						© 2015-2017, licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>
					</p>
				</div>  <!-- /.col-md-8 -->

				<div class="col-md-4 footer-social">
					<span class="pull-right">
						<a href="https://github.com/HiPhish" title="GitHub" target="_blank">
							<img  class="img-circle" src="http://hiphish.github.io/images/footer/github.png" alt="GitHub"/>
						</a>
						<a href="https://gitlab.com/u/HiPhish" title="GitLab" target="_blank">
							<img  class="img-circle" src="http://hiphish.github.io/images/footer/gitlab.png" alt="GitLab"/>
						</a>
					</span>  <!-- /.pull-right -->
				</div>  <!-- /.col-md-4 -->
			</div>
		</footer>
	</body>
</html>

