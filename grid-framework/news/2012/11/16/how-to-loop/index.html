<html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>HiPhish's Workshop-Grid Framework</title><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" crossorigin="anonymous" /><link rel="stylesheet" href="/css/custom.css" type="text/css" media="all" /><link rel="stylesheet" href="/css/local-nav.css" type="text/css" media="all" /><link rel="stylesheet" href="/css/pygments.css" type="text/css" media="all" /><link rel="stylesheet" href="/css/blog.css" type="text/css" media="all" /><link rel="stylesheet" href="/css/article.css" type="text/css" media="all" /><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script></head><body><h1>HTML-page body</h1><header><nav id="main-navbar" class="navbar navbar-default"><h1>Site-wide navigation bar</h1><div class="container-fluid"><input type="checkbox" value="" name="navbar-toggle-cbox" id="navbar-toggle-cbox" /><div class="navbar-header"><label for="navbar-toggle-cbox" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar-collapse" aria-controls="navbar-toggle-cbox"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></label><a class="navbar-brand" href="/">HiPhish's Workshop</a></div><div class="collapse navbar-collapse" id="main-navbar-collapse"><ul class="nav navbar-nav"><li class="dropdown"><a class="dropdown-toggle" href="/grid-framework/" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Grid Framework</a><ul class="dropdown-menu"><li><a href="/grid-framework/">Overview</a></li><li class="divider" role="separator"></li><li><a href="/grid-framework/features/">Features</a></li><li><a href="/grid-framework/examples/">Examples</a></li><li><a href="/grid-framework/gallery/">Gallery</a></li><li><a href="/grid-framework/showcase/">Showcase</a></li><li><a href="/grid-framework/faq/">FAQ</a></li><li><a href="/grid-framework/news/">News</a></li><li class="divider" role="separator"></li><li><a href="http://forum.unity3d.com/threads/grid-framework-scripting-and-editor-plugins.144886/">Support</a></li><li class="divider" role="separator"></li><li><a href="https://www.assetstore.unity3d.com/#/content/62498">Buy Now <span class="badge">35$</span></a></li></ul></li><li class="dropdown"><a class="dropdown-toggle" href="/open-source/" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Open Source</a><ul class="dropdown-menu"><li><a href="https://gitlab.com/HiPhish/ntfs-clone">NTFS-Clone</a></li><li><a href="https://gitlab.com/HiPhish/roll">roll</a></li><li><a href="https://github.com/HiPhish/Newton-method">Newton's Method in C</a></li><li><a href="https://github.com/HiPhish/XeenTools">Xeen Tools</a></li><li><a href="https://github.com/HiPhish/Wolf3DExtract">Wolf3D Extract</a></li><li><a href="https://github.com/HiPhish/Game-Source-Documentation">Game Source Documentation</a></li></ul></li><li class="dropdown"><a class="dropdown-toggle" href="/vim/" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Vim/Nvim plugins</a><ul class="dropdown-menu"><li><a href="https://gitlab.com/HiPhish/info.vim">Info.vim</a></li><li><a href="https://gitlab.com/HiPhish/repl.nvim">REPL.nvim</a></li><li><a href="https://gitlab.com/HiPhish/jinja.vim">jinja.vim</a></li></ul></li></ul><ul class="nav navbar-nav navbar-right"><li><a href="/blog/">Blog</a></li><li><a href="/about/">About</a></li></ul></div></div></nav></header><section class="container"><h1>Document body</h1><nav class="local-nav"><h1>Sub-site navigation bar</h1><ul><li><a href="/grid-framework/">Grid Framework</a></li><li><a href="/grid-framework/features/">Features</a></li><li><a href="/grid-framework/examples/">Examples</a></li><li><a href="/grid-framework/gallery/">Gallery</a></li><li><a href="/grid-framework/showcase/">Showcase</a></li><li><a href="/grid-framework/faq/">FAQ</a></li><li><a href="/grid-framework/news/">News</a></li><li><a href="http://forum.unity3d.com/threads/grid-framework-scripting-and-editor-plugins.144886/">Support</a></li><li><a href="https://www.assetstore.unity3d.com/#/content/62498/">Buy <span class="badge">35$</span></a></li></ul></nav><section class="col-md-12 container"><h1>Blog</h1><section><nav class="blog-breadcrumbs" aria-label="Breadcrumbs"><h1>Breadcrumbs navigation</h1><ol class="breadcrumb"><li class=""><a href="../../../..">news</a></li><li class=""><a href="../../..">2012</a></li><li class=""><a href="../..">11</a></li><li class="active">16</li><li class="active">how-to-loop</li></ol></nav><main><article><h1><a href="." title="Permalink to How to loop through a list and remove items" rel="bookmark">How to loop through a list and remove items</a></h1><header><p><time class="published" datetime="2012-11-16">Published: 2012-11-16</time></p><p>Category: <a href="../../../../categories/misc/">misc</a></p><p>Tags: <a href="../../../../tags/old-blog/">old-blog </a><a href="../../../../tags/how-to/">how-to </a></p></header><p>The other day I had the following problem: I had a list of <code>Transfom</code>s and I
wanted to remove the entries that met a certain condition. This is what I had
written:</p><pre><code class="language-cs">foreach(Transform trns in transformList){  
    if(AlreadyAligned(trns))  
        transformList.Remove(trns);  
}</code></pre><p>This gave me the following error message: <code>InvalidOperationException</code>:
Collection was modified; enumeration operation may not execute.</p><p>This makes sense, I'm modifying the list I'm currently reading and there is no
way I can be sure I'll catch all entries. There are three ways around this
problem: The first is to use LINQ (C# only), the second is instead of removing
the entries at once to store them in a separate list and then use that list in
a second <code>foreach</code>-loop to remove the entries from the first list and the third
solution is to use a for-loop. After some research I reached the conclusion
that the for-loop is the fastest way to achieve the needed results. Here is the
code:</p><pre><code class="language-cs">int counter = transformList.Count;  
for(int i = 0; i &lt;= counter - 1; i++){  
    if(AlreadyAligned(transformList[i])){  
        transformList.RemoveAt(i);  
        i --; //reduce the indexer because we removed an entry from list  
        counter --; //reduce the counter since the list has become smaller  
    }  
}</code></pre><p>First of all we need to know how many entries the list has initially. I could
have used <code>transformList</code>.Count in the loop directly but this way I don't have
to call the Count method for each iteration. Then we set up the loop, we start
at index 0 and go to counter - 1 (because the index starts at 0 instead of 1).
We perform our check and if it succeeds we remove the entry with index i. Since
the list has now been shortened we need to reduce i because an item that has
been at a position of 7 for example is now at position 6 (assuming that i is
less or equal to 6 in this case). We also need to reduce our counter because
the length of the list has been shortened as well.</p><p>As you can see the amount of lines has been doubled, while using LINQ would
have left the code short. If you know that your list will always be small
enough I'd go for the slower but shorter approach. In my case though I have no
idea how large the list will eventually be, so using the for-loop makes perfect
sense. I hope some of you find this useful in the future.</p><footer><hr /><nav><ul class="pager"><li class="previous"><a href="../../../../2012/11/13/hex-grids-love-vectrosity/" rel="prev"><span aria-hidden="true">←</span> Hex Grids love Vectrosity</a></li><li class="next"><a href="../../../../2012/11/19/version-119/" rel="next">Grid Framework version 1.1.9 released <span aria-hidden="true">→</span></a></li></ul></nav></footer></article></main></section><nav class="well"><h1>Blog navigation</h1><nav><h1><a href="/grid-framework/news/archive/">Archive</a></h1><ul><li><a href="/grid-framework/news/2018/">2018 (1)</a></li><li><a href="/grid-framework/news/2017/">2017 (3)</a></li><li><a href="/grid-framework/news/2016/">2016 (16)</a></li><li><a href="/grid-framework/news/2015/">2015 (13)</a></li><li><a href="/grid-framework/news/2014/">2014 (8)</a></li><li><a href="/grid-framework/news/2013/">2013 (19)</a></li><li><a href="/grid-framework/news/2012/">2012 (40)</a></li></ul></nav><nav><h1><a href="/grid-framework/news/categories/">Categories</a></h1><ul><li><a href="/grid-framework/news/categories/tips/">tips (2)</a></li><li><a href="/grid-framework/news/categories/organisation/">organisation (6)</a></li><li><a href="/grid-framework/news/categories/progress/">progress (26)</a></li><li><a href="/grid-framework/news/categories/misc/">misc (24)</a></li><li><a href="/grid-framework/news/categories/release/">release (42)</a></li></ul></nav><nav><h1><a href="/grid-framework/news/tags/">Tags</a></h1><ul><li><a href="/grid-framework/news/tags/API-change/">API-change (1)</a></li><li><a href="/grid-framework/news/tags/extension/">extension (4)</a></li><li><a href="/grid-framework/news/tags/how-to/">how-to (6)</a></li><li><a href="/grid-framework/news/tags/rant/">rant (3)</a></li><li><a href="/grid-framework/news/tags/example/">example (7)</a></li><li><a href="/grid-framework/news/tags/old-blog/">old-blog (74)</a></li><li><a href="/grid-framework/news/tags/asset-store/">asset-store (1)</a></li><li><a href="/grid-framework/news/tags/coordinate-system/">coordinate-system (1)</a></li><li><a href="/grid-framework/news/tags/spheric/">spheric (1)</a></li></ul></nav><aside><strong>Subscribe:</strong> <a href="/grid-framework/news/rss.xml" type="application/rss+xml">RSS</a></aside></nav></section></section><footer><div class="container"><div class="col-md-8 footer-self"><a href="/" title="HiPhish's Workshop"><img src="/img/footer/logo.png" title="HiPhish's Workshop" /></a><p class="text-muted"><a href="http://creativecommons.org/licenses/by-sa/4.0/"><img class="copyright-image" src="/img/footer/cc.svg" alt="Creative Commons Attribution-ShareAlike 4.0 International License" /> </a>© 2015-2019, licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></p></div><div class="col-md-4 footer-social"><span class="pull-right"><a href="https://github.com/HiPhish" title="GitHub" target="blank"><img class="img-circle" src="/img/footer/github.png" alt="GitHub" /> </a><a href="https://gitlab.com/HiPhish" title="GitLab" target="blank"><img class="img-circle" src="/img/footer/gitlab.png" alt="GitLab" /> </a></span></div></div></footer></body></html>