<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>HiPhish's Workshop-Grid Framework</title><link rel="stylesheet" href="/css/main.css" type="text/css" media="all" /><link rel="stylesheet" href="/css/local-nav.css" type="text/css" media="all" /><link rel="stylesheet" href="/css/blog.css" type="text/css" media="all" /></head><body><header><nav id="main-navbar"><input type="checkbox" id="main-nav-hamburger" hidden="hidden" /><div><a href="/">HiPhish's Workshop</a><label for="main-nav-hamburger" hidden="hidden"></label></div><ul><li><a href="/grid-framework/">Grid Framework</a><ul><li><a href="/grid-framework/">Overview</a></li><li hidden="hidden"></li><li><a href="/grid-framework/features/">Features</a></li><li><a href="/grid-framework/examples/">Examples</a></li><li><a href="/grid-framework/gallery/">Gallery</a></li><li><a href="/grid-framework/showcase/">Showcase</a></li><li><a href="/grid-framework/faq/">FAQ</a></li><li><a href="/grid-framework/news/">News</a></li><li hidden="hidden"></li><li><a href="http://forum.unity3d.com/threads/grid-framework-scripting-and-editor-plugins.144886/">Support</a></li><li hidden="hidden"></li><li><a href="https://www.assetstore.unity3d.com/#/content/62498">Buy Now <span class="badge">35$</span></a></li></ul></li><li><a href="/#products">Open Source</a><ul><li><a href="https://gitlab.com/HiPhish/ntfs-clone">NTFS-Clone</a></li><li><a href="https://gitlab.com/HiPhish/IPS-Tools">IPS-Tools</a></li><li><a href="https://gitlab.com/HiPhish/roll">roll</a></li><li><a href="https://github.com/HiPhish/Newton-method">Newton's Method in C</a></li><li><a href="https://github.com/HiPhish/XeenTools">Xeen Tools</a></li><li><a href="https://github.com/HiPhish/Wolf3DExtract">Wolf3D Extract</a></li><li><a href="https://github.com/HiPhish/Game-Source-Documentation">Game Source Documentation</a></li></ul></li><li><a href="/vim/plugins/">Vim/Nvim plugins</a><ul><li><a href="https://gitlab.com/HiPhish/info.vim">Info.vim</a></li><li><a href="https://gitlab.com/HiPhish/repl.nvim">REPL.nvim</a></li><li><a href="https://gitlab.com/HiPhish/quicklisp.nvim">Quicklisp.nvim</a></li><li><a href="https://gitlab.com/HiPhish/jinja.vim">jinja.vim</a></li><li><a href="https://gitlab.com/HiPhish/neovim-guix-channel/">Guix channel</a></li></ul></li><li class="push-end"><a href="/blog/">Blog</a></li><li><a href="/about/">About</a></li></ul></nav></header><div><nav class="local-nav"><ul><li><a href="/grid-framework/">Grid Framework</a></li><li><a href="/grid-framework/features/">Features</a></li><li><a href="/grid-framework/examples/">Examples</a></li><li><a href="/grid-framework/gallery/">Gallery</a></li><li><a href="/grid-framework/showcase/">Showcase</a></li><li><a href="/grid-framework/faq/">FAQ</a></li><li><a href="/grid-framework/news/">News</a></li><li><a href="http://forum.unity3d.com/threads/grid-framework-scripting-and-editor-plugins.144886/">Support</a></li><li><a href="https://www.assetstore.unity3d.com/#/content/62498/">Buy <span class="badge">35$</span></a></li></ul></nav><div class="blog"><nav class="breadcrumbs" aria-label="Breadcrumbs"><ol><li class=""><a href="../../../..">news</a></li><li class=""><a href="../../..">2021</a></li><li class=""><a href="../..">07</a></li><li class="active">31</li><li class="active">vectrosity-support-as-package</li></ol></nav><main class="blogpost"><article><h1><a href="." title="Permalink to Vectrosity support as a package" rel="bookmark">Vectrosity support as a package</a></h1><header><p><time class="published" datetime="2021-07-31">Published: 2021-07-31</time></p><p>Category: <a href="../../../../categories/progress/">progress</a></p><p>Tags: <a href="../../../../tags/v3/">v3 </a><a href="../../../../tags/vectrosity/">vectrosity </a><a href="../../../../tags/packages/">packages </a></p></header><p>I have completely transitioned Grid Framework to a Unity3D package now and
moved <a href="https://starscenesoftware.com/vectrosity.html">Vectrosity</a> support to a separate package. The Vectrosity package will
be made available as a public Git repository under the <a href="https://opensource.org/licenses/MIT">MIT license</a>, that should
make it as simple as possible for users to add it to their project. While
transitioning to packages has had many advantages there have also been some
challenges to overcome and I would like to go over them in this post.</p><h2>Documentation</h2><p>I hold the opinion that every software should come with offline documentation,
unless it is so trivial that it does not need any documentation to begin with.
The manual and scripting reference consists of HTML pages with images, CSS
files and a little bit of JavaScript, all generated by <a href="https://www.doxygen.nl/index.html">Doxygen</a>.</p><p>The result is pretty good in my opinion, but Unity throws a wrench in my plans:
it treats the Javascript as game scripts and the images as textures. Now your
project won't compile and your textures library will be full of images which
were never meant to be used as textures. My solution until now has been to run
some automated text editing magic to rename the files and rewrite references to
them. It works because the web browser does not care about file extensions when
rendering a page, but you might have issues if you try to open the image on its
own.</p><p>Packages solve this problem neatly: Any directory name which ends in a tilde
(<code>~</code>) will be ignored. Unity already uses <code>Documentation~</code> for documentation,
so I simply output the generated files there. A README file points users in the
right direction if they decide to poke around in the folder, and the
documentation can be opened straight from Unity's help menu as well.</p><h2>Samples</h2><p>Examples are a good way to get a taste of an extension in action and try it out
quickly, especially for a scripting extension. The examples have had a similar
problem to the documentation in that you would have all those foreign textures
and scripts in your project, but at least examples would not stop your project
from compiling. Users who did not want all that stuff had to go and delete the
examples by hand. We can do better than that.</p><p>Packages have a &quot;samples&quot; mechanism: you can mark certain directories of the
package as samples and users can then import individual examples into their
project. They can also throw the imported sample away or modify it without
affecting the original sample. Samples are usually stored inside the <code>Samples~</code>
directory which is ignored by Unity.</p><p>That's great if you are a user, but it is horrible if you are developer. I do
not want Unity to ignore my samples, I want it to compile my scripts, load my
textures, generate meta files and so on. After trying out various solutions,
one more convoluted than the other, I think I have found a dead simple and in
hindsight obvious solution: use symbolic links (symlinks).</p><p>First I symlink the original samples directory to one that is not ignored: <code>ln -s Samples~ Samples</code>. This creates a directory which Unity will pick up, and
changes to files inside the link directory are applied to the files inside the
original directory (because they are the exact same files). All that is now
left to do is to instruct Git to ignore the link by adding the link to the
<code>.gitignore</code> file (or to <code>.git/info/exclude</code>). Obviously the link must not be
shipped to end users.</p><p>A final word of caution: Unity warns against using symlinks because it is
possible to seriously mess up your project. They do not discourage it, but you
need to know what you are doing.</p><blockquote><p>Packages/com.hiphish.grid-framework/Samples is a symbolic link. Using
symlinks in Unity projects may cause your project to become corrupted if you
create multiple references to the same asset, use recursive symlinks or use
symlinks to share assets between projects used with different versions of
Unity. Make sure you know what you are doing.</p></blockquote><p>I think I'm going to be fine. What could possibly go wrong? (famous last words)</p><h2>Vectrosity package</h2><p>This is the big one. Including Vectrosity support in the main package would
break compilation for anyone who does not have have Vectrosity installed, so I
needed an ugly workaround involving preprocessor symbols. With packages it's
simple: if you want Vectrosity support, install it as a separate package. The
package will be available on launch as a public Git repository, no strings
attached.</p><p>There are two ways to create a package: as a standalone package or embedded
inside a project. Grid Framework is embedded because it is simpler to have the
supporting Unity structure around it. The Vectrosity package on the other hand
is standalone because it makes things easier for users.</p><p>However, in order to develop Vectrosity support I still need a Unity project to
generate the meta files and provide me with tooling while programming. The
solution is simple: First I have a copy of the Git repository on my local
system, then I add it as a <em>local</em> package to my Grid Framework project. I can
now work inside the Grid Framework project, make changes to the Vectrosity
files and the original files inside the Vectrosity repository will be affected.</p><p>I also use the same trick for working on the samples as above.</p><h2>Conclusion</h2><p>Unity packages solve many of the issues of the past: files can be grouped
properly according to their role, directories can be ignored, scripts can be
compiled in separate assemblies, and packages can have metadata. They also
introduce their own sets of challenges, but the new problems are far easier to
solve and can be solved cleanly instead of hacking my way around them.</p></article></main><nav class="blog-pager"><a href="../../../../2021/07/11/embracing-the-unity-packages-system/" rel="previous" style="float: left"><span aria-hidden="true">←</span> Embracing the Unity package system</a><a href="../../../../2021/09/11/git-packages-or-embedded-packages/" rel="next" style="float: right">Git packages or embedded packages? Yes. <span aria-hidden="true">→</span></a></nav><nav class="blog-navigation" aria-label="Blog navigation"><aside><span>Subscribe:</span> <a href="/grid-framework/news//rss.xml" type="application/rss+xml">RSS</a></aside><nav><h1><a href="/grid-framework/news/archive/">Archive</a></h1><ul><li><a href="/grid-framework/news/2021/">2021 (11)</a></li><li><a href="/grid-framework/news/2019/">2019 (3)</a></li><li><a href="/grid-framework/news/2018/">2018 (1)</a></li><li><a href="/grid-framework/news/2017/">2017 (3)</a></li><li><a href="/grid-framework/news/2016/">2016 (16)</a></li><li><a href="/grid-framework/news/2015/">2015 (13)</a></li><li><a href="/grid-framework/news/2014/">2014 (8)</a></li><li><a href="/grid-framework/news/2013/">2013 (19)</a></li><li><a href="/grid-framework/news/2012/">2012 (40)</a></li></ul></nav><nav><h1><a href="/grid-framework/news/categories/">Categories</a></h1><ul><li><a href="/grid-framework/news/categories/tips/">tips (2)</a></li><li><a href="/grid-framework/news/categories/misc/">misc (24)</a></li><li><a href="/grid-framework/news/categories/organisation/">organisation (7)</a></li><li><a href="/grid-framework/news/categories/release/">release (43)</a></li><li><a href="/grid-framework/news/categories/progress/">progress (38)</a></li></ul></nav><nav><h1><a href="/grid-framework/news/tags/">Tags</a></h1><ul><li><a href="/grid-framework/news/tags/extension/">extension (4)</a></li><li><a href="/grid-framework/news/tags/rant/">rant (3)</a></li><li><a href="/grid-framework/news/tags/example/">example (7)</a></li><li><a href="/grid-framework/news/tags/old-blog/">old-blog (74)</a></li><li><a href="/grid-framework/news/tags/asset-store/">asset-store (1)</a></li><li><a href="/grid-framework/news/tags/coordinate-system/">coordinate-system (1)</a></li><li><a href="/grid-framework/news/tags/spheric/">spheric (1)</a></li><li><a href="/grid-framework/news/tags/API-change/">API-change (3)</a></li><li><a href="/grid-framework/news/tags/vectrosity/">vectrosity (5)</a></li><li><a href="/grid-framework/news/tags/how-to/">how-to (7)</a></li><li><a href="/grid-framework/news/tags/packages/">packages (5)</a></li><li><a href="/grid-framework/news/tags/playmaker/">playmaker (3)</a></li><li><a href="/grid-framework/news/tags/v3/">v3 (10)</a></li></ul></nav></nav></div></div><footer><div><div class="footer-self"><a href="/" title="HiPhish's Workshop"><img src="/img/footer/logo.png" title="HiPhish's Workshop" height="55" /></a><p><a href="http://creativecommons.org/licenses/by-sa/4.0/"><img class="copyright-image" src="/img/footer/cc.svg" alt="Creative Commons Attribution-ShareAlike 4.0 International License" /> </a>© 2015-2021, licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></p></div><div class="footer-social"><a href="https://github.com/HiPhish" title="GitHub" target="blank"><img src="/img/footer/github.png" alt="GitHub" height="55" /> </a><a href="https://gitlab.com/HiPhish" title="GitLab" target="blank"><img src="/img/footer/gitlab.png" alt="GitLab" height="55" /> </a></div></div></footer></body></html>