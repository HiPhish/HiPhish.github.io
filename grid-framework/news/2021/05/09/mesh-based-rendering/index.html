<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>HiPhish's Workshop-Grid Framework</title><link rel="stylesheet" href="/css/main.css" type="text/css" media="all" /><link rel="stylesheet" href="/css/local-nav.css" type="text/css" media="all" /><link rel="stylesheet" href="/css/blog.css" type="text/css" media="all" /></head><body><header><nav id="main-navbar"><input type="checkbox" id="main-nav-hamburger" hidden="hidden" /><div><a href="/">HiPhish's Workshop</a><label for="main-nav-hamburger" hidden="hidden"></label></div><ul><li><a href="/grid-framework/">Grid Framework</a><ul><li><a href="/grid-framework/">Overview</a></li><li hidden="hidden"></li><li><a href="/grid-framework/features/">Features</a></li><li><a href="/grid-framework/examples/">Examples</a></li><li><a href="/grid-framework/gallery/">Gallery</a></li><li><a href="/grid-framework/showcase/">Showcase</a></li><li><a href="/grid-framework/faq/">FAQ</a></li><li><a href="/grid-framework/news/">News</a></li><li hidden="hidden"></li><li><a href="http://forum.unity3d.com/threads/grid-framework-scripting-and-editor-plugins.144886/">Support</a></li><li hidden="hidden"></li><li><a href="https://www.assetstore.unity3d.com/#/content/62498">Buy Now <span class="badge">35$</span></a></li></ul></li><li><a href="/#products">Open Source</a><ul><li><a href="https://gitlab.com/HiPhish/ntfs-clone">NTFS-Clone</a></li><li><a href="https://gitlab.com/HiPhish/IPS-Tools">IPS-Tools</a></li><li><a href="https://gitlab.com/HiPhish/roll">roll</a></li><li><a href="https://github.com/HiPhish/Newton-method">Newton's Method in C</a></li><li><a href="https://github.com/HiPhish/XeenTools">Xeen Tools</a></li><li><a href="https://github.com/HiPhish/Wolf3DExtract">Wolf3D Extract</a></li><li><a href="https://github.com/HiPhish/Game-Source-Documentation">Game Source Documentation</a></li></ul></li><li><a href="/vim/plugins/">Vim/Nvim plugins</a><ul><li><a href="https://gitlab.com/HiPhish/info.vim">Info.vim</a></li><li><a href="https://gitlab.com/HiPhish/repl.nvim">REPL.nvim</a></li><li><a href="https://gitlab.com/HiPhish/quicklisp.nvim">Quicklisp.nvim</a></li><li><a href="https://gitlab.com/HiPhish/jinja.vim">jinja.vim</a></li><li><a href="https://gitlab.com/HiPhish/neovim-guix-channel/">Guix channel</a></li></ul></li><li class="push-end"><a href="/blog/">Blog</a></li><li><a href="/about/">About</a></li></ul></nav></header><div><nav class="local-nav"><ul><li><a href="/grid-framework/">Grid Framework</a></li><li><a href="/grid-framework/features/">Features</a></li><li><a href="/grid-framework/examples/">Examples</a></li><li><a href="/grid-framework/gallery/">Gallery</a></li><li><a href="/grid-framework/showcase/">Showcase</a></li><li><a href="/grid-framework/faq/">FAQ</a></li><li><a href="/grid-framework/news/">News</a></li><li><a href="http://forum.unity3d.com/threads/grid-framework-scripting-and-editor-plugins.144886/">Support</a></li><li><a href="https://www.assetstore.unity3d.com/#/content/62498/">Buy <span class="badge">35$</span></a></li></ul></nav><div class="blog"><nav class="breadcrumbs" aria-label="Breadcrumbs"><ol><li class=""><a href="../../../..">news</a></li><li class=""><a href="../../..">2021</a></li><li class=""><a href="../..">05</a></li><li class="active">09</li><li class="active">mesh-based-rendering</li></ol></nav><main class="blogpost"><article><h1><a href="." title="Permalink to Mesh-based rendering" rel="bookmark">Mesh-based rendering</a></h1><header><p><time class="published" datetime="2021-05-09">Published: 2021-05-09</time></p><p>Category: <a href="../../../../categories/progress/">progress</a></p><p>Tags: <a href="../../../../tags/v3/">v3 </a></p></header><p>The big one has landed: mesh-based rendering. This is the main reason for the
major version bump and it is fully working now. Mesh-based rendering means that
instead of drawing lines using the low-level <a href="https://docs.unity3d.com/ScriptReference/GL.html">GL</a> class a mesh is generated
which Unity can then render the same way it renders any other mesh. This means
that grid lines can now be rendered below sprites instead of always on top of
them.</p><p><img src="render.png" alt="screenshot of a grid with a sprite in front of it" title="Rendering example" /></p><h2>How it works</h2><p>The mesh-based rendering backend needs to be attached to a game object. It then
queries the rendering system periodically for changes. Only when a change has
occurred the mesh is re-computed. This helps us save processing power and keeps
garbage low. Usually a mesh is made up of triangles, but in this case I use the
lines <a href="https://docs.unity3d.com/ScriptReference/MeshTopology.html">topology</a>, which lets us draw a mesh made up of line segments.</p><p>Ideally the backend would get notified automatically when a grid property has
changed, but this is unfortunately not possible in Unity. Instead the backend
asks the system every frame “Check if anything as changed”, then the rendering
system does its stuff, and eventually it sends a notification back to the
backend if there is something to be done. Currently the system is queried on
every frame, but it would be easy to add a variable to only query on every n-th
frame.</p><h2>Drawbacks</h2><p>All lines have the same colour and a width of one pixel. I could implement
different colours per axis, but I do not think there is interest in such a
feature when rendered in a running game (it is useful in the editor view
though). As for the line width, I think this is better left to a 3rd party
package like <a href="https://starscenesoftware.com/vectrosity.html">Vectrosity</a>.</p><p>I prefer not to add everything and the kitchen sink, other people have already
solved the problem of rendering lines much better. Grid Framework should come
with rendering solutions which are good enough for the basic uses cases, and
make it easy to integrate with other packages if users desire more features and
control.</p><h2>Next steps</h2><p>I need to migrate Vectrosity support to the new system and maybe change how it
is used. Ideally I would like to extract Vectrosity support to into its own
package to download from the Asset Store (for free of course) so it does not
bloat the rest of Grid Framework for those who do not need it. However, this
will depend on whether the Asset Store allows uploading packages which have
dependencies on a package which I do not own.</p></article></main><nav class="blog-pager"><a href="../../../../2021/04/25/version-3-feature-parity-with-version-2/" rel="previous" style="float: left"><span aria-hidden="true">←</span> Version 3 reaching feature parity with version 2</a><a style="display: none;"></a></nav><nav class="blog-navigation" aria-label="Blog navigation"><aside><span>Subscribe:</span> <a href="/grid-framework/news//rss.xml" type="application/rss+xml">RSS</a></aside><nav><h1><a href="/grid-framework/news/archive/">Archive</a></h1><ul><li><a href="/grid-framework/news/2021/">2021 (3)</a></li><li><a href="/grid-framework/news/2019/">2019 (3)</a></li><li><a href="/grid-framework/news/2018/">2018 (1)</a></li><li><a href="/grid-framework/news/2017/">2017 (3)</a></li><li><a href="/grid-framework/news/2016/">2016 (16)</a></li><li><a href="/grid-framework/news/2015/">2015 (13)</a></li><li><a href="/grid-framework/news/2014/">2014 (8)</a></li><li><a href="/grid-framework/news/2013/">2013 (19)</a></li><li><a href="/grid-framework/news/2012/">2012 (40)</a></li></ul></nav><nav><h1><a href="/grid-framework/news/categories/">Categories</a></h1><ul><li><a href="/grid-framework/news/categories/tips/">tips (2)</a></li><li><a href="/grid-framework/news/categories/misc/">misc (24)</a></li><li><a href="/grid-framework/news/categories/organisation/">organisation (7)</a></li><li><a href="/grid-framework/news/categories/release/">release (43)</a></li><li><a href="/grid-framework/news/categories/progress/">progress (30)</a></li></ul></nav><nav><h1><a href="/grid-framework/news/tags/">Tags</a></h1><ul><li><a href="/grid-framework/news/tags/extension/">extension (4)</a></li><li><a href="/grid-framework/news/tags/how-to/">how-to (6)</a></li><li><a href="/grid-framework/news/tags/rant/">rant (3)</a></li><li><a href="/grid-framework/news/tags/example/">example (7)</a></li><li><a href="/grid-framework/news/tags/old-blog/">old-blog (74)</a></li><li><a href="/grid-framework/news/tags/asset-store/">asset-store (1)</a></li><li><a href="/grid-framework/news/tags/coordinate-system/">coordinate-system (1)</a></li><li><a href="/grid-framework/news/tags/spheric/">spheric (1)</a></li><li><a href="/grid-framework/news/tags/API-change/">API-change (3)</a></li><li><a href="/grid-framework/news/tags/v3/">v3 (3)</a></li></ul></nav></nav></div></div><footer><div><div class="footer-self"><a href="/" title="HiPhish's Workshop"><img src="/img/footer/logo.png" title="HiPhish's Workshop" height="55" /></a><p><a href="http://creativecommons.org/licenses/by-sa/4.0/"><img class="copyright-image" src="/img/footer/cc.svg" alt="Creative Commons Attribution-ShareAlike 4.0 International License" /> </a>© 2015-2021, licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></p></div><div class="footer-social"><a href="https://github.com/HiPhish" title="GitHub" target="blank"><img src="/img/footer/github.png" alt="GitHub" height="55" /> </a><a href="https://gitlab.com/HiPhish" title="GitLab" target="blank"><img src="/img/footer/gitlab.png" alt="GitLab" height="55" /> </a></div></div></footer></body></html>