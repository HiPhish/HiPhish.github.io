<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>News - Grid Framework</title><link rel="stylesheet" href="/css/main.css" type="text/css" media="all"/><link rel="stylesheet" href="/css/local-nav.css" type="text/css" media="all"/><link rel="stylesheet" href="/css/blog.css" type="text/css" media="all"/></head><body><header><nav id="main-navbar"><input type="checkbox" id="main-nav-hamburger" hidden="hidden"/><div><a href="/">HiPhish's Workshop</a><label for="main-nav-hamburger" hidden="hidden"></label></div><ul><li><a href="/grid-framework/">Grid Framework</a><ul><li><a href="/grid-framework/">Overview</a></li><li hidden="hidden"/><li><a href="/grid-framework/features/">Features</a></li><li><a href="/grid-framework/examples/">Examples</a></li><li><a href="/grid-framework/gallery/">Gallery</a></li><li><a href="/grid-framework/showcase/">Showcase</a></li><li><a href="/grid-framework/faq/">FAQ</a></li><li><a href=" /grid-framework/news/">News</a></li><li hidden="hidden"/><li><a href="http://forum.unity3d.com/threads/grid-framework-scripting-and-editor-plugins.144886/">Support</a></li><li hidden="hidden"/><li><a href="https://www.assetstore.unity3d.com/#/content/62498">Buy Now <span class="badge">35$</span></a></li></ul></li><li><a href="/#products">Open Source</a><ul><li><a href="https://gitlab.com/HiPhish/ntfs-clone">NTFS-Clone</a></li><li><a href="https://gitlab.com/HiPhish/IPS-Tools">IPS-Tools</a></li><li><a href="https://gitlab.com/HiPhish/roll">roll</a></li><li><a href="https://github.com/HiPhish/Newton-method">Newton's Method in C</a></li><li><a href="https://github.com/HiPhish/XeenTools">Xeen Tools</a></li><li><a href="https://github.com/HiPhish/Wolf3DExtract">Wolf3D Extract</a></li><li><a href="https://github.com/HiPhish/Game-Source-Documentation">Game Source Documentation</a></li></ul></li><li><a href="/vim/plugins/">Vim/Nvim plugins</a><ul><li><a href="https://gitlab.com/HiPhish/info.vim">Info.vim</a></li><li><a href="https://gitlab.com/HiPhish/repl.nvim">REPL.nvim</a></li><li><a href="https://gitlab.com/HiPhish/quicklisp.nvim">Quicklisp.nvim</a></li><li><a href="https://gitlab.com/HiPhish/jinja.vim">jinja.vim</a></li><li><a href="https://gitlab.com/HiPhish/neovim-guix-channel/">Guix channel</a></li></ul></li><li class="push-end"><a href="/blog/">Blog</a></li><li><a href="/about/">About</a></li></ul></nav></header><div><nav class="local-nav"><ul><li><a href="/grid-framework/">Grid Framework</a></li><li><a href="/grid-framework/features/">Features</a></li><li><a href="/grid-framework/examples/">Examples</a></li><li><a href="/grid-framework/gallery/">Gallery</a></li><li><a href="/grid-framework/showcase/">Showcase</a></li><li><a href="/grid-framework/faq/">FAQ</a></li><li aria-current="page"><a href="/grid-framework/news/">News</a></li><li><a href="http://forum.unity3d.com/threads/grid-framework-scripting-and-editor-plugins.144886/">Support</a></li><li><a href="https://www.assetstore.unity3d.com/#/content/62498/">Buy <span class="badge">35$</span></a></li></ul></nav><div class="blog"><nav class="breadcrumbs" aria-label="Breadcrumbs"><ol><li class=""><a href="../../../../">news</a></li><li class=""><a href="../../../">2013</a></li><li class=""><a href="../../">07</a></li><li class="active">03</li><li class="active">check-component</li></ol></nav><main class="blogpost"><article><h1><a href="." title="permalink to CheckComponent()" rel="bookmark">CheckComponent()</a></h1><header class="blog-post-header"><p class="blog-post-published">published: <time datetime="2013-07-03">2013-07-03</time></p><p class="blog-post-category">categories: <a href="../../../../categories/misc/">misc</a></p><p class="blog-post-tags">tags: <a href="../../../../tags/old-blog/">old-blog</a>, <a href="../../../../tags/how-to/">how-to</a></p></header><p>Here is a quick but handy tip. Recently I found myself needing to reference
various components in my script without knowing if they exist. I have to get
the component and then check if it exists, and if not add it to prevent null
exceptions. Here is what you would write in such a case:</p><pre><code>MeshCollider mc = GetComponent&lt;MeshCollider&gt;();
if (!mc)
   mc = gameObject.AddComponent&lt;MeshCollider&gt;();
}
</code></pre><p>First we get the component and store it in a variable, then if it is null we
add the component to the object. Simple, right? True, but if you need to do
this several times it can get messy. You can copy-paste it once with a
different type, but it gets tedious.</p><p>Fortunately we can call generics to the rescue! Let's wrap it all up into one
generic function that works on any component:</p><pre><code>private T CheckComponent&lt;T&gt;() where T: Component {
    T component = GetComponent&lt;T&gt;();
    if (!component)
        component = gameObject.AddComponent&lt;T&gt;();
    return component;
}

MeshCollider mc = CheckComponent&lt;MeshCollider&gt;();
</code></pre><p>Note that it is important for the type T to inherit from Component or else the
methods GetComponent and AddComponent don't make any sense and will throw
errors. We can take this even one step further by making CheckCompnent an
extension method:</p><pre><code>using UnityEngine;
using System.Collections;

public static class ComponentExtensions {
    public static T CheckComponent&lt;T&gt;(this Component theComponent) where T: Component {
        T component = theComponent.GetComponent&lt;T&gt;();
        if (!component)
            component = theComponent.gameObject.AddComponent&lt;T&gt;();
        return component;
    }
}
</code></pre><p>Now you can call CheckComponent as if it were a part of Unity's standard API,
just like GetComponent.</p><pre><code>// use this in any of your scripts:
MeshCollider mc = CheckComponent&lt;MeshCollider&gt;();
</code></pre></article><nav class="blog-pager"><a href="/grid-framework/news/2013/06/17/version-130/" rel="previous" style="float: left"><span aria-hidden="true">←</span> Grid Framework version 1.3.0 released</a><a href="/grid-framework/news/2013/07/19/whats-up-next/" rel="next" style="float: right">What's up next? <span aria-hidden="true">→</span></a></nav></main><nav class="blog-navigation" aria-label="Blog navigation"><aside><span>subscribe:</span> <a href="/grid-framework/news/rss.xml" type="application/rss+xml">RSS</a></aside><nav><h1><a href="/grid-framework/news/archive/">archive</a></h1><ul><li><a href="/grid-framework/news/2021/">2021 (14)</a></li><li><a href="/grid-framework/news/2019/">2019 (3)</a></li><li><a href="/grid-framework/news/2018/">2018 (1)</a></li><li><a href="/grid-framework/news/2017/">2017 (3)</a></li><li><a href="/grid-framework/news/2016/">2016 (16)</a></li><li><a href="/grid-framework/news/2015/">2015 (13)</a></li><li><a href="/grid-framework/news/2014/">2014 (8)</a></li><li><a href="/grid-framework/news/2013/">2013 (19)</a></li><li><a href="/grid-framework/news/2012/">2012 (40)</a></li></ul></nav><nav><h1><a href="/grid-framework/news/categories/">categories</a></h1><ul><li><a href="/grid-framework/news/categories/misc/">misc (23)</a></li><li><a href="/grid-framework/news/categories/organisation/">organisation (7)</a></li><li><a href="/grid-framework/news/categories/progress/">progress (41)</a></li><li><a href="/grid-framework/news/categories/release/">release (44)</a></li><li><a href="/grid-framework/news/categories/tips/">tips (2)</a></li></ul></nav><nav><h1><a href="/grid-framework/news/tags/">tags</a></h1><ul><li><a href="/grid-framework/news/tags/old-blog/">old-blog (74)</a></li><li><a href="/grid-framework/news/tags/v3/">v3 (13)</a></li><li><a href="/grid-framework/news/tags/example/">example (7)</a></li><li><a href="/grid-framework/news/tags/how-to/">how-to (7)</a></li><li><a href="/grid-framework/news/tags/vectrosity/">vectrosity (5)</a></li><li><a href="/grid-framework/news/tags/packages/">packages (5)</a></li><li><a href="/grid-framework/news/tags/extension/">extension (4)</a></li><li><a href="/grid-framework/news/tags/rant/">rant (3)</a></li><li><a href="/grid-framework/news/tags/API-change/">API-change (3)</a></li><li><a href="/grid-framework/news/tags/playmaker/">playmaker (3)</a></li><li><a href="/grid-framework/news/tags/spheric/">spheric (2)</a></li><li><a href="/grid-framework/news/tags/asset-store/">asset-store (1)</a></li><li><a href="/grid-framework/news/tags/coordinate-system/">coordinate-system (1)</a></li></ul></nav></nav></div></div><footer><div><div class="footer-self"><a href="/" title="HiPhish's Workshop"><img src="/img/footer/logo.png" title="HiPhish's Workshop" height="55"/></a><p><a href="http://creativecommons.org/licenses/by-sa/4.0/"><img class="copyright-image" src="/img/footer/cc.svg" alt="Creative Commons Attribution-ShareAlike 4.0 International License"/> </a>© 2015-2022, licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></p></div><div class="footer-social"><a href="https://github.com/HiPhish" title="GitHub" target="blank"><img src="/img/footer/github.png" alt="GitHub" height="55"/> </a><a href="https://gitlab.com/HiPhish" title="GitLab" target="blank"><img src="/img/footer/gitlab.png" alt="GitLab" height="55"/> </a></div></div></footer></body></html>