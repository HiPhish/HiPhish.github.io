<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Moving along a grid - Grid Framework-Grid Framework</title><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" crossorigin="anonymous" /><link rel="stylesheet" href="/css/main.css" type="text/css" media="all" /><link rel="stylesheet" href="/css/local-nav.css" type="text/css" media="all" /><link rel="stylesheet" href="../web-player.css" type="text/css" media="all" /><script src="/js/unity-webgl.js"></script></head><body><header><nav id="main-navbar"><input type="checkbox" id="main-nav-hamburger" hidden="hidden" /><div><a href="/">HiPhish's Workshop</a><label for="main-nav-hamburger" hidden="hidden"></label></div><ul><li><a href="/grid-framework/">Grid Framework</a><ul><li><a href="/grid-framework/">Overview</a></li><li hidden="hidden"></li><li><a href="/grid-framework/features/">Features</a></li><li><a href="/grid-framework/examples/">Examples</a></li><li><a href="/grid-framework/gallery/">Gallery</a></li><li><a href="/grid-framework/showcase/">Showcase</a></li><li><a href="/grid-framework/faq/">FAQ</a></li><li><a href="/grid-framework/news/">News</a></li><li hidden="hidden"></li><li><a href="http://forum.unity3d.com/threads/grid-framework-scripting-and-editor-plugins.144886/">Support</a></li><li hidden="hidden"></li><li><a href="https://www.assetstore.unity3d.com/#/content/62498">Buy Now <span class="badge">35$</span></a></li></ul></li><li><a href="/#products">Open Source</a><ul><li><a href="https://gitlab.com/HiPhish/ntfs-clone">NTFS-Clone</a></li><li><a href="https://gitlab.com/HiPhish/IPS-Tools">IPS-Tools</a></li><li><a href="https://gitlab.com/HiPhish/roll">roll</a></li><li><a href="https://github.com/HiPhish/Newton-method">Newton's Method in C</a></li><li><a href="https://github.com/HiPhish/XeenTools">Xeen Tools</a></li><li><a href="https://github.com/HiPhish/Wolf3DExtract">Wolf3D Extract</a></li><li><a href="https://github.com/HiPhish/Game-Source-Documentation">Game Source Documentation</a></li></ul></li><li><a href="/vim/plugins/">Vim/Nvim plugins</a><ul><li><a href="https://gitlab.com/HiPhish/info.vim">Info.vim</a></li><li><a href="https://gitlab.com/HiPhish/repl.nvim">REPL.nvim</a></li><li><a href="https://gitlab.com/HiPhish/quicklisp.nvim">Quicklisp.nvim</a></li><li><a href="https://gitlab.com/HiPhish/jinja.vim">jinja.vim</a></li><li><a href="https://gitlab.com/HiPhish/neovim-guix-channel/">Guix channel</a></li></ul></li><li class="push-end"><a href="/blog/">Blog</a></li><li><a href="/about/">About</a></li></ul></nav></header><div><nav class="local-nav"><ul><li><a href="/grid-framework/">Grid Framework</a></li><li><a href="/grid-framework/features/">Features</a></li><li><a href="/grid-framework/examples/">Examples</a></li><li><a href="/grid-framework/gallery/">Gallery</a></li><li><a href="/grid-framework/showcase/">Showcase</a></li><li><a href="/grid-framework/faq/">FAQ</a></li><li><a href="/grid-framework/news/">News</a></li><li><a href="http://forum.unity3d.com/threads/grid-framework-scripting-and-editor-plugins.144886/">Support</a></li><li><a href="https://www.assetstore.unity3d.com/#/content/62498/">Buy <span class="badge">35$</span></a></li></ul></nav><link href="example.datagz" /><link href="example.jsgz" /><link href="example.asm.jsgz" /><link href="example.memgz" /><p class="backlink"><a href="../#movement">Grid Framework examples</a> | <strong>Moving along a grid</strong></p><p>Use the arrow keys to move. The hero cannot pass through walls and he
     cannot step on water. The walls are entries inside the map of the level,
     the water is outside the map.</p><canvas id="canvas" oncontextmenu="event.preventDefault()" height="450" width="600"></canvas><p>This example demonstrates one of the simplest and most common uses for
     Grid Framework: converting between coordinate systems. We take the
     object's current position, convert is to grid space, add a direction to
     it, convert the result back to world space and use that as the
     destination of our movement function.</p><pre><code>var goal = grid.WorldToGrid(transform.position)
goal += Vector3.right;
transform.position = grid.GridToWorld(goal);
</code></pre><p>This on its own is not that interesting, so let's limit the player to
     the visible region of the grid. Every grid is infinitely large, but the <em>renderer</em> has a range we can use as limits before converting back to world
     coordinates:</p><pre><code>if (goal.x &lt; _renderer.From.x || goal.x &gt; _renderer.To.x)
    return;
if (goal.y &lt; _renderer.From.y || goal.y &gt; _renderer.To.y)
    return;</code></pre><p>As a final touch, let's use Grid Framework to store the map of the game.
     It will know which tiles are OK to walk on and which ones are obstacles.
     We will use a 2D array to keep track of the game; each entry's row and
     column corresponds to the tile's X- and Y coordinates in the grid.</p><pre><code>// After checking for range, before converting to world coordinates
if (!FreeTile(_goal)) {
    return;
}

// Building the matrix
var rows    = Mathf.FloorToInt(_renderer.To.x);
var columns = Mathf.FloorToInt(_renderer.To.y);

_tiles = new bool[rows, columns];

// Checking a tile (grid coordinates)
var r = Mathf.FloorToInt(tile.x);
var c = Mathf.FloorToInt(tile.y);
return _tiles[r, c];
</code></pre><script src="../example.js" type="text/javascript"></script><script src="UnityLoader.js"></script></div><footer><div><div class="footer-self"><a href="/" title="HiPhish's Workshop"><img src="/img/footer/logo.png" title="HiPhish's Workshop" height="55" /></a><p><a href="http://creativecommons.org/licenses/by-sa/4.0/"><img class="copyright-image" src="/img/footer/cc.svg" alt="Creative Commons Attribution-ShareAlike 4.0 International License" /> </a>Â© 2015-2020, licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></p></div><div class="footer-social"><a href="https://github.com/HiPhish" title="GitHub" target="blank"><img src="/img/footer/github.png" alt="GitHub" height="55" /> </a><a href="https://gitlab.com/HiPhish" title="GitLab" target="blank"><img src="/img/footer/gitlab.png" alt="GitLab" height="55" /> </a></div></div></footer></body></html>