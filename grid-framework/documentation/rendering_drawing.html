<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Grid Framework: Rendering and drawing a Grid</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Grid Framework
   &#160;<span id="projectnumber">1.8.3</span>
   </div>
   <div id="projectbrief">Easy grid setup and scripting for Unity 3D</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('rendering_drawing.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Rendering and drawing a Grid </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Render VS Draw </h2>
<p>Grid Framework lets you both draw and render the grid. While they share the same points and give similar results they work in different ways: drawing uses gizmos, rendering is done directly at a low level. Drawings won’t be visible in the game during runtime but they are visible in the editor, while the rendered grid is only visible in game view at runtime. Both serve the same purpose and together they complete each other. Use drawing when you want you to see the grid and use rendering when you want the player to see the grid.</p>
<h2>Setup </h2>
<p>Make sure your grid has the <code>renderGrid</code> flag set to <em>true</em> and set the line’s width. Attach the <code>GFGridRenderCamera</code> component to all your cameras which are supposed to render the grid. Usually this would be your default camera. In the inspector you can make the camera render the grid even if it’s not the current main camera; this could be useful for example if you want the grid to appear on a mini-map.</p>
<h2>Material and shader </h2>
<p>Every rendering process requires a material. If you don't specify your own material a default material will be used. In Unity version 4 and earlier this material will be generated from a shader string and there is nothing for you to do.</p>
<p>Unity version 5 deprecated this practice and has annouced that the feature of generating a material from shader string will be removed. Therefore in Unity 5 the material generated from a shader asset found in <code>Plugins/Grid Framework/Resources/Default.shader</code>. Being in a <code>Resources</code> directory the shader will be included by default in your build, so it should work out of the box.</p>
<h2>Absolute and relative size </h2>
<p>By default the size (and <code>renderFrom</code>/<code>renderTo</code>) is interpreted as absolute lengths in world units. This means a grid with an X-size of 5 will always be five wold units wide to both sides, regardless of its other values like spacing or radius. Setting the <code>useRelativeSize</code> flag will interpret the <code>size</code> (and <code>renderFrom</code>/<code>renderTo</code>) as relative lengths measured in grid space.</p>
<p>In other words, a rectangular grid with an X-<code>spacing</code> of 1.5 and an X-<code>size</code> of 3 will have an absolute width of 6 (3 x 2) world units and a relative width of 9 (3 x 1.5 x 2) world units.</p>
<h2>Rendering Range </h2>
<p>By default the part of the grid that gets rendered or drawn is defined by its <code>size</code> setting. At the centre lies the origin of the grid and from there on it spreads by the specified size in each direction. This means if for example your grid has a <code>size</code> of (2, 3,1) it will spread two world units both left and right from the origin. The rendering respects rotation and position of the game object, but not scale. Scale is analogous to spacing.</p>
<p>If you want, you can set your own rendering range. In the inspector set the flag for <code>useCustomRenderingRange</code>, which will let you specify your own range. The only limitation here is that each component of <code>renderFrom</code> has to be smaller or equal to its corresponding component in <code>renderTo</code>. You can also set these values in code, please refer to the scripting manual. Despite its name the rendering range applies to both rendering and drawing.</p>
<h2>Shared Settings </h2>
<p>The rendering shares some options with the drawing. They have the same colours and you can toggle the axes individually. The members <code>hideGrid</code> and <code>hideOnPlay</code> are only for drawing, you can toggle rendering through the <code>renderGrid</code> flag. If you set the the <code>useSeparateRenderColor</code> to <em>true</em> can can also have separate colours for rendering and drawing.</p>
<h2>Manual Rendering </h2>
<p>Grid Framework has built-in capabilities to render a rectangular area using a <em>from</em> and <em>to</em> vector. If you want to render several areas you have to call the rendering method <code>RenderGrid</code> manually during Unity's <em>OnPostRender</em> callback. Take a look at this example: </p><pre class="fragment">GFGrid grid;
Camera cam;
void OnPostRender(){
    grid.RenderGrid(Vector3.zero,  Vector3.one, 1, cam, cam.transform);
    grid.RenderGrid(Vector3.zero, -Vector3.one, 1, cam, cam.transform);
}
</pre><p>To see a practical example take a look at the source code of the <em>GFGridRenderCamera</em> component. If you write your own grid renderer component you don't need the default one anymore.</p>
<h2>Rendering with Vectrosity </h2>
<p><a href="http://starscenesoftware.com/vectrosity.html">Vectrosity</a> is a separate vector line drawing solution developed by Eric5h5 and not related to Grid Framework. If you own a license you can easily extract points from a grid in a format fit for use with Vectrosity. The included examples show how to combine both packages. For more information on how to use them together please refer to Grid Framework’s scripting reference and Vectrosity’s own documentation. Just like with rendering you can either use the grid’s <code>size</code> (default) or a custom range.</p>
<div class="image">
<img src="vectrosity.png" alt="vectrosity.png"/>
<div class="caption">
an example of what is possible with Grid Framework and Vectrosity</div></div>
 <h2>Rendering Performance </h2>
<p>Rendering, as well as drawing, is a two-step process: first we need to calculate the two end points for each line and then we need to actually render all those lines. Since version 1.2.4 Grid Framework will cache the calculated points, meaning as long as you don’t change your grid the points won’t be re-calculated again. This means we don’t need to waste resources calculating the same values over and over again. However, the second step cannot be cached, we need to pass every single point to Unity’s GL class every frame.</p>
<p>For rectangular grids every line stretches from one end of the grid to the other, so it doesn’t matter how long the lines are, only how dense they are.</p>
<p>Hex grids on the other hand consist of many line segments, basically every hex adds three lines to the count (lines shared between hexes are drawn only once), outer hexes add even more. This makes a hex grid more expensive than a rectangular grid of the same size.</p>
<p>The performance cost of polar grids depends largely one the amount of <code>sectors</code> and the <code>smoothness</code>, the more you have, the more expensive it gets. Keep in mind that the more sectors your grid has, the less smoothing you need to achieve a round look.</p>
<p>To improve performance you could adjust the rendering range of your grid dynamically during gameplay to only render the area the player will be able to see. Of course frequently changing the range forces a recalculation of the points and defeats the purpose of caching. Still, the gain in performance can be worth it, just make sure to adjust the range only at certain thresholds. Also keep in mind that if something is set not to render it won’t just be invisible, it will not be rendered at all and prevent the loops from running. Turning off an axis or having a flat grid can make a noticeable difference (a 100 x 100 x 0 grid will perform much better than a 100 x 100 x 1 grid).</p>
<p>The <em>seemingly endless grid</em> example shows how you can create the illusion of a huge grid without actually having to render the whole thing. We only render the part that will be visible plus some extra buffer. Only when the camera has been moved ten world units from the last fixed position we readjust the rendering range, thus forcing a recalculation of the draw points. This is a compromise between performance and flexibility, we can still display a large grid without the huge overhead of actually having a large grid. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Nov 17 2015 18:35:35 for Grid Framework by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
