<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>HiPhish's Workshop</title><link rel="stylesheet" href="/css/main.css" type="text/css" media="all"/><link rel="stylesheet" href="/css/local-nav.css" type="text/css" media="all"/><link rel="stylesheet" href="/css/blog.css" type="text/css" media="all"/></head><body><header><nav id="main-navbar"><input type="checkbox" id="main-nav-hamburger" hidden="hidden"/><div><a href="/">HiPhish's Workshop</a><label for="main-nav-hamburger" hidden="hidden"></label></div><ul><li><a href="/grid-framework/">Grid Framework</a><ul><li><a href="/grid-framework/">Overview</a></li><li hidden="hidden"/><li><a href="/grid-framework/features/">Features</a></li><li><a href="/grid-framework/examples/">Examples</a></li><li><a href="/grid-framework/gallery/">Gallery</a></li><li><a href="/grid-framework/showcase/">Showcase</a></li><li><a href="/grid-framework/faq/">FAQ</a></li><li><a href=" /grid-framework/news/">News</a></li><li hidden="hidden"/><li><a href="http://forum.unity3d.com/threads/grid-framework-scripting-and-editor-plugins.144886/">Support</a></li><li hidden="hidden"/><li><a href="https://www.assetstore.unity3d.com/#/content/62498">Buy Now <span class="badge">35$</span></a></li></ul></li><li><a href="/#products">Open Source</a><ul><li><a href="https://gitlab.com/HiPhish/ntfs-clone">NTFS-Clone</a></li><li><a href="https://gitlab.com/HiPhish/IPS-Tools">IPS-Tools</a></li><li><a href="https://gitlab.com/HiPhish/roll">roll</a></li><li><a href="https://github.com/HiPhish/Newton-method">Newton's Method in C</a></li><li><a href="https://github.com/HiPhish/XeenTools">Xeen Tools</a></li><li><a href="https://github.com/HiPhish/Wolf3DExtract">Wolf3D Extract</a></li><li><a href="https://github.com/HiPhish/Game-Source-Documentation">Game Source Documentation</a></li></ul></li><li><a href="/vim/plugins/">Vim/Nvim plugins</a><ul><li><a href="https://gitlab.com/HiPhish/info.vim">Info.vim</a></li><li><a href="https://gitlab.com/HiPhish/repl.nvim">REPL.nvim</a></li><li><a href="https://gitlab.com/HiPhish/quicklisp.nvim">Quicklisp.nvim</a></li><li><a href="https://gitlab.com/HiPhish/jinja.vim">jinja.vim</a></li><li><a href="https://gitlab.com/HiPhish/neovim-guix-channel/">Guix channel</a></li></ul></li><li class="push-end"><a href="/blog/">Blog</a></li><li><a href="/about/">About</a></li></ul></nav></header><div><div class="blog"><nav class="breadcrumbs" aria-label="Breadcrumbs"><ol><li class=""><a href="../../../../">blog</a></li><li class=""><a href="../../../">2023</a></li><li class=""><a href="../../">12</a></li><li class="active">24</li><li class="active">rainbow-delimiters-0.3.0-released</li></ol></nav><main class="blogpost"><article><h1><a href="." title="permalink to Rainbow-delimiters.nvim version 0.3.0 released" rel="bookmark">Rainbow-delimiters.nvim version 0.3.0 released</a></h1><header class="blog-post-header"><p class="blog-post-published">published: <time datetime="2023-12-24">2023-12-24</time></p><p class="blog-post-category">categories: <a href="../../../../categories/vim/">vim</a></p><p class="blog-post-tags">tags: <a href="../../../../tags/vim/">vim</a></p></header><p>I have just published version 0.3.0 of <a href="https://gitlab.com/HiPhish/rainbow-delimiters.nvim">rainbow-delimiters.nvim</a> (<a href="https://github.com/HiPhish/rainbow-delimiters.nvim">GitHub
mirror</a>).  This update brings in a number of the usual improvements to to
queries and strategies, but more importantly it also makes configuration at
runtime more flexible, but most importantly in light of the current date it
also includes a fun little Christmas-themed strategy.</p><h2 id="General improvements">General improvements</h2><ul><li><p>Support for <a href="https://bazel.build/rules/language">Starlark</a> (by <a href="https://gitlab.com/FollieHiyuki">Hoang Nguyen</a>)</p></li><li><p>Missing patterns for Bash, C, Elixir, Fennel and React
(by too many people to name them all here)</p></li><li><p>Updated Nim queries for current version of the parser (by <a href="https://github.com/aMOPel">aMOPel</a>)</p></li><li><p>New query <code>rainbow-tags-react</code> for React (by <a href="https://github.com/ribru17">Riley Bruins</a>)</p></li><li><p>New query <code>rainbow-blocks</code> for Tree-sitter queries (by <a href="https://github.com/binhtran432k">Binh Duc Tran</a> and <a href="https://github.com/Danielkonge">Daniel Kongsgaard</a>)</p></li></ul><p>The React queries are great for people who want to highlight only the tags in React
code, but not all the other parenthesis-like delimiters.  The Tree-sitter query
query will highlight entire query nodes, not just the parentheses; this looks
especially great in the <code>:InspectTree</code> window in the upcoming Neovim 0.10.</p><h2 id="Runtime configuration">Runtime configuration</h2><p>Previously it was only possible to select a fixed query per language, but what
if my choice of query depends on runtime properties?  For example, I like the
new <code>rainbow-blocks</code> query inside the <code>:InspectTree</code> window, but I find it too
vibrant when writing a query.  Now we can set a function in the configuration,
which will be run for each new <code>query</code> buffer.</p><pre><code>vim.g.rainbow_delimiters = {
    query = {
        query = function(bufnr)
            -- Use blocks for read-only buffers like in `:InspectTree`
            local is_nofile = vim.bo[bufnr].buftype == 'nofile'
            return is_nofile and 'rainbow-blocks' or 'rainbow-delimiters'
        end,
    }
}
</code></pre><p>Here is what the result looks like.  Note how both windows show content in the
same language, but on the left-hand side only the parentheses are highlighted.</p><p><img src="query.png" title="Tree-sitter queries" alt="Screenshot of Neovim showing two buffers with different delimiter highlighting"/></p><h2 id="A festive Christmas strategy">A festive Christmas strategy</h2><p>What's better than a colourful syntax tree? A blinking festive Christmas Syntax
Tree of course!  Truly this will make rainbow-delimiters.nvim the ultimate
rainbow plugin of all time.</p><p><img src="christmas.gif" title="Christmas lights strategy" alt="Screenshot of Neovim with three buffers; in each one the colours of delimiter sets is changing"/></p><p>Beautiful, is it not?  Of course this is just a joke strategy and will not be
loaded by default.  If you want to try it out for yourself you will need to
import the decorator yourself and apply it to your settings.</p><pre><code>local rb = require 'rainbow-delimiters'
local christmas = require 'rainbow-delimiters.strategy.christmas'

-- This creates a new strategy which wraps around the existing global strategy
local christmas_lights = christmas.lights(rb.strategy['global']),

---@type rainbow_delimiters.config
vim.g.rainbow_delimiters = {
	strategy = {
		[''] = christmas_lights,
	},
}
</code></pre><p>For maximum effect make sure you use this strategy when pair-programming or
live-streaming.  Merry Christmas to all of you.</p></article><nav class="blog-pager"><a href="/blog/2023/11/12/big-change-to-rainbow-delimiters-nvim/" rel="previous" style="float: left"><span aria-hidden="true">←</span> Big change to rainbow-delimiters.nvim</a><a href="/blog/2024/01/29/testing-neovim-plugins-with-busted/" rel="next" style="float: right">Testing Neovim plugins with Busted <span aria-hidden="true">→</span></a></nav></main><nav class="blog-navigation" aria-label="Blog navigation"><aside><span>subscribe:</span> <a href="/blog/rss.xml" type="application/rss+xml">RSS</a></aside><nav><h1><a href="/blog/archive/">archive</a></h1><ul><li><a href="/blog/2024/">2024 (6)</a></li><li><a href="/blog/2023/">2023 (11)</a></li><li><a href="/blog/2022/">2022 (13)</a></li><li><a href="/blog/2021/">2021 (5)</a></li><li><a href="/blog/2020/">2020 (15)</a></li><li><a href="/blog/2019/">2019 (17)</a></li><li><a href="/blog/2018/">2018 (1)</a></li><li><a href="/blog/2017/">2017 (4)</a></li><li><a href="/blog/2016/">2016 (6)</a></li><li><a href="/blog/2015/">2015 (2)</a></li></ul></nav><nav><h1><a href="/blog/categories/">categories</a></h1><ul><li><a href="/blog/categories/misc/">misc (20)</a></li><li><a href="/blog/categories/open-source/">open-source (24)</a></li><li><a href="/blog/categories/organisation/">organisation (14)</a></li><li><a href="/blog/categories/vim/">vim (22)</a></li></ul></nav><nav><h1><a href="/blog/tags/">tags</a></h1><ul><li><a href="/blog/tags/lisp/">lisp (21)</a></li><li><a href="/blog/tags/vim/">vim (20)</a></li><li><a href="/blog/tags/rant/">rant (14)</a></li><li><a href="/blog/tags/html/">html (10)</a></li><li><a href="/blog/tags/unix/">unix (8)</a></li><li><a href="/blog/tags/lua/">lua (7)</a></li><li><a href="/blog/tags/linux/">linux (5)</a></li><li><a href="/blog/tags/web/">web (4)</a></li><li><a href="/blog/tags/msgpack/">msgpack (3)</a></li><li><a href="/blog/tags/neovim/">neovim (3)</a></li><li><a href="/blog/tags/games/">games (3)</a></li><li><a href="/blog/tags/guix/">guix (2)</a></li><li><a href="/blog/tags/network/">network (2)</a></li><li><a href="/blog/tags/markdown/">markdown (2)</a></li><li><a href="/blog/tags/testing/">testing (2)</a></li><li><a href="/blog/tags/cocoa/">cocoa (1)</a></li><li><a href="/blog/tags/info/">info (1)</a></li><li><a href="/blog/tags/awk/">awk (1)</a></li><li><a href="/blog/tags/elixir/">elixir (1)</a></li><li><a href="/blog/tags/wine/">wine (1)</a></li><li><a href="/blog/tags/git/">git (1)</a></li><li><a href="/blog/tags/terminal/">terminal (1)</a></li><li><a href="/blog/tags/unity3d/">unity3d (1)</a></li><li><a href="/blog/tags/python/">python (1)</a></li></ul></nav></nav></div></div><footer><div><div class="footer-self"><a href="/" title="HiPhish's Workshop"><img src="/img/footer/logo.png" title="HiPhish's Workshop" height="55"/></a><p><a href="http://creativecommons.org/licenses/by-sa/4.0/"><img class="copyright-image" src="/img/footer/cc.svg" alt="Creative Commons Attribution-ShareAlike 4.0 International License"/> </a>© 2015-2022, licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></p></div><div class="footer-social"><a href="https://github.com/HiPhish" title="GitHub" target="blank"><img src="/img/footer/github.png" alt="GitHub" height="55"/> </a><a href="https://gitlab.com/HiPhish" title="GitLab" target="blank"><img src="/img/footer/gitlab.png" alt="GitLab" height="55"/> </a></div></div></footer></body></html>